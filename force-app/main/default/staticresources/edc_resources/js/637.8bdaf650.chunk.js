"use strict";(self.webpackChunkedc_widgets_sfdc=self.webpackChunkedc_widgets_sfdc||[]).push([[637],{9923:(e,a,t)=>{t.d(a,{K2:()=>T,c5:()=>_,b0:()=>f,bT:()=>S,jf:()=>i,lV:()=>d,PY:()=>E,yB:()=>R,AO:()=>v,qF:()=>C,ZE:()=>O,Wk:()=>A,AZ:()=>D,db:()=>I,Do:()=>m,h3:()=>s,lT:()=>y,mB:()=>c});t(1649);var l=t(8079),n=t(2856),o=t(744),r=t(5523);var u=t(8170);const s=e=>{var a,t,l,o;let r=null===e||void 0===e?void 0:e.find((e=>(null===e||void 0===e?void 0:e.name)===n.default.ORG_CONFIG.ORG_CUSTOMIZATION_CONFIG));return r=!(r&&(null===(a=r)||void 0===a||null===(t=a.value)||void 0===t||null===(l=t.web)||void 0===l||null===(o=l.topMenu["web/topMenu/discover"])||void 0===o||!o.visible)),r},c=e=>{var a;let t=(e=>{let a=null===e||void 0===e?void 0:e.filter((e=>(null===e||void 0===e?void 0:e.name)===n.default.ORG_CONFIG.ORG_CUSTOMIZATION_CONFIG)),t={};if((null===a||void 0===a?void 0:a.length)>0){var l,o,r,u;t=null!==(l=null===(o=a[0])||void 0===o||null===(r=o.value)||void 0===r?void 0:r.discover)&&void 0!==l?l:{};const e=null===(u=Object.keys(t))||void 0===u?void 0:u.filter((e=>{var a;return!1===(null===(a=t[e])||void 0===a?void 0:a.visible)}));null===e||void 0===e||e.forEach((e=>{delete t[e]}))}return t})(e),l=[];return null===(a=Object.keys(t))||void 0===a||a.forEach((e=>{var a;let n=null!==(a=t[e])&&void 0!==a?a:{};n.carouselType=e,l.push(n)})),l.sort(((e,a)=>e.index-a.index)),{enabledCarouselList:l,discoverConfig:t}},d=function(){var e,a,t;let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{defaultCarousel:null===(e=Object.keys(l))||void 0===e?void 0:e.filter((e=>{var a;return 2===(null===e||void 0===e||null===(a=e.split("/"))||void 0===a?void 0:a.length)})),instanceCarousel:null===(a=Object.keys(l))||void 0===a?void 0:a.filter((e=>{var a;return 3===(null===e||void 0===e||null===(a=e.split("/"))||void 0===a?void 0:a.length)})),customCarousel:null===(t=Object.keys(l))||void 0===t?void 0:t.filter((e=>{var a;return 5===(null===e||void 0===e||null===(a=e.split("/"))||void 0===a?void 0:a.length)}))}};function i(e,a,t){var o,r;let u,s=a&&(null===a||void 0===a?void 0:a.configs)&&a.configs.filter((e=>e.name===n.default.DEFAULT_LANGUAGE_KEY)),c=s&&(null===s||void 0===s?void 0:s.length)>0&&s[0].value,d=t&&(null===t||void 0===t?void 0:t.profile)&&(null===t||void 0===t||null===(o=t.profile)||void 0===o?void 0:o.language)||c||n.default.DEFAULT_LANGUAGE;const i=e.label?e.label:e.defaultLabel,E=a&&(0,l.mj)(a.languages)||n.default.LANGUAGE_NAMES;return u=e.languages&&e.languages[null===(r=E[d])||void 0===r?void 0:r.toLowerCase()]||i,u}const E=e=>{let a,{data:t,carousel:o,carouselTypeSplitArray:r,carouselTypeSplitArrayLength:s}=e,c=r[s-1],d=t;if(2===s)switch(c){case n.default.DISCOVER_TAB.FEATURED_PROVIDERS:a=n.default.DISCOVER_TAB_CAROUSEL_TYPE.PROVIDERS;break;case n.default.DISCOVER_TAB.TRENDING:case n.default.DISCOVER_TAB.JOURNEYS:case n.default.DISCOVER_TAB.PATHWAYS:case n.default.DISCOVER_TAB.VIDEOS:a=n.default.DISCOVER_TAB_CAROUSEL_TYPE.CARD;break;case n.default.DISCOVER_TAB.USERS:a=n.default.DISCOVER_TAB_CAROUSEL_TYPE.USER;break;case n.default.DISCOVER_TAB.COURSES:case n.default.DISCOVER_TAB.CHANNELS:a=n.default.DISCOVER_TAB_CAROUSEL_TYPE.CHANNEL;break;default:return(0,u.jsx)("div",{children:"No Result Found"})}else if(3===s)a=n.default.DISCOVER_TAB_CAROUSEL_TYPE.CARD;else if(5===s&&!(0,l.xb)(t))switch(d=t[o.id]?t[o.id]:t,c=r[s-2],c){case n.default.DISCOVER_TAB.CARD:a=n.default.DISCOVER_TAB_CAROUSEL_TYPE.CARD;break;case n.default.DISCOVER_TAB.USER:a=n.default.DISCOVER_TAB_CAROUSEL_TYPE.USER;break;default:a=n.default.DISCOVER_TAB_CAROUSEL_TYPE.CHANNEL}return{carouselType:a,filterData:d}},T=e=>{var a;let t=[];return null===(a=Object.keys(e))||void 0===a||a.forEach((a=>{e[a]&&e[a].entity&&t.push(e[a].entity)})),t},f=async e=>{var a;let{carouselType:t,userInfo:u,instanceCarousel:s,customCarousel:c,eclUrl:d,orgInfo:i}=e;const{domain:E,jwtToken:T}=u;try{var f,y;let e,u,I=[];const p=null===i||void 0===i||null===(f=i.configs)||void 0===f||null===(y=f.find((e=>e.name===n.default.ADMIN_CONFIG.ENABLE_ONLY_TEAM_USERS_ON_PEOPLE_CAROUSEL)))||void 0===y?void 0:y.value;switch(t){case n.default.DISCOVER_TAB.USERS:[e,u]=await(async e=>{let{jwtToken:a,domain:t,enableOnlyTeamUsers:l}=e;const r=A(10,0,l,n.default.RECOMMENDED_USERS_KEYS);return await(0,o.x)({url:r,domain:t,requestType:n.default.HTTP_METHOD.GET,jwtToken:a})})({jwtToken:T,domain:E,enableOnlyTeamUsers:p}),I=e&&e.users;break;case n.default.DISCOVER_TAB.TRENDING:[e,u]=await(async e=>{let{jwtToken:a,domain:t}=e,l="".concat(n.default.LXP_RESOURCES.TRENDING_CARDS,"?true");return await(0,o.x)({url:l,domain:t,requestType:n.default.HTTP_METHOD.GET,jwtToken:a})})({jwtToken:T,domain:E}),I=e&&e.cards;break;case n.default.DISCOVER_TAB.FEATURED_PROVIDERS:[e,u]=await async function(e,a,t){let u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;const c=await(0,r.bG)({domain:a,jwtToken:e}),d=_(c.userTeams,u,s),i=(0,l.Do)(),E=D(e,d,i,t);let T="".concat(n.default.LXP_RESOURCES.CARD_SOURCES,"?").concat(E.params),f=E.sourceDataUrl&&E.sourceDataUrl.replace(n.default.PROTOCOL,"");return await(0,o.x)({url:T,domain:f,requestType:n.default.HTTP_METHOD.GET,jwtToken:e})}(T,E,d),I=e&&e.data;break;case n.default.DISCOVER_TAB.COURSES:[e,u]=await(async e=>{let{jwtToken:a,domain:t}=e;const l=R(20,1);return await(0,o.x)({url:l,domain:t,requestType:n.default.HTTP_METHOD.GET,jwtToken:a})})({jwtToken:T,domain:E}),I="object"===typeof e&&null!==(a=e)&&void 0!==a&&a.error?[]:e;break;case n.default.DISCOVER_TAB.CHANNELS:[e,u]=await(async e=>{let{jwtToken:a,domain:t}=e;const l="".concat(n.default.LXP_RESOURCES.DISCOVER_CHANNELS,"?limit=").concat(10);return await(0,o.x)({url:l,domain:t,requestType:n.default.HTTP_METHOD.GET,jwtToken:a})})({jwtToken:T,domain:E}),I=e&&e.channels;break;case n.default.DISCOVER_TAB.PATHWAYS:[e,u]=await(async e=>{let{jwtToken:a,domain:t}=e;const l=O({});return(0,o.x)({url:l,domain:t,requestType:n.default.HTTP_METHOD.GET,jwtToken:a})})({jwtToken:T,domain:E}),I=e&&e.cards;break;case n.default.DISCOVER_TAB.JOURNEYS:[e,u]=await(async e=>{let{jwtToken:a,domain:t}=e;const l=C({});return await(0,o.x)({url:l,domain:t,requestType:n.default.HTTP_METHOD.GET,jwtToken:a})})({jwtToken:T,domain:E}),I=e&&e.cards;break;case n.default.DISCOVER_TAB.VIDEOS:[e,u]=await(async e=>{let{jwtToken:a,domain:t}=e;const l=m({limit:10,offset:0});return(0,o.x)({url:l,domain:t,requestType:n.default.HTTP_METHOD.GET,jwtToken:a})})({jwtToken:T,domain:E}),I=e&&e.videos;break;case n.default.DISCOVER_TAB.INSTANCES:if(s.length>0){const a=await Promise.all(null===s||void 0===s?void 0:s.map((async e=>{const a=e.split("/").pop(),t=await(async e=>{let{uuid:a,jwtToken:t,domain:l}=e;const r=S(a,n.default.JOURNEY_PATHWAY_FIELDS.join());return await(0,o.x)({url:r,domain:l,requestType:n.default.HTTP_METHOD.GET,jwtToken:t})})({uuid:a,jwtToken:T,domain:E});return null===t||void 0===t?void 0:t.cards})));[e,u]=a.flat(),I=e&&e.cards}break;case n.default.DISCOVER_TAB.CUSTOM_CAROUSELS:if(c.length>0){const a=null===c||void 0===c?void 0:c.map((e=>e.split("/").pop()));[e,u]=await(async e=>{let{jwtToken:a,domain:t,ids:l}=e;const r=v({structureIds:l});return await(0,o.x)({url:r,domain:t,requestType:n.default.HTTP_METHOD.GET,jwtToken:a})})({ids:a,jwtToken:T,domain:E}),I=e}break;default:console.error("unknown carousel")}return[I,u]}catch(I){return console.error(I),[null,I.message]}},_=(e,a,t)=>{let l="".concat(a,"&offset=").concat(t,"&is_featured=true");return(null===e||void 0===e?void 0:e.length)>0&&e.forEach((e=>{l+="&team_ids[]=".concat(e.teamId)})),l+="&sort_by_seq_no=true",l},S=(e,a)=>"".concat(n.default.LXP_RESOURCES.CAROUSEL_CONTENT,"?uuid=").concat(e,"&fields=").concat(a),R=(e,a)=>"?format=json&per_page=".concat(e,"&page=").concat(a,"&include_enrolled=true"),v=e=>{let{structureIds:a=[],filter_by_language:t=!1}=e,l="";return null===a||void 0===a||a.forEach((e=>{l+="&structure_ids[]=".concat(e)})),l+="&filter_by_language=".concat(t),"".concat(n.default.LXP_RESOURCES.ENTITIES_DATA,"?").concat(l,"&channel_fields=").concat(n.default.CHANNELS_FIELD,"&user_fields=").concat(n.default.RECOMMENDED_USERS_KEYS)},C=e=>{let{limit:a,offset:t,filter_by_language:l=!0}=e;const o=a?"&limit=".concat(a):"",r=t?"&offset=".concat(t):"";return"".concat(n.default.LXP_RESOURCES.TRENDING_JOURNEYS,"?fields=").concat(n.default.JOURNEY_PATHWAY_FIELDS.join()).concat(o).concat(r,"&filter_by_language=").concat(l)},O=e=>{let{limit:a,offset:t,filter_by_language:l=!0}=e;const o=a?"&limit=".concat(a):"",r=t?"&offset=".concat(t):"";return"".concat(n.default.LXP_RESOURCES.TRENDING_PATHWAYS,"?fields=").concat(n.default.JOURNEY_PATHWAY_FIELDS.join()).concat(o).concat(r,"&filter_by_language=").concat(l)},A=(e,a,t,l)=>{const o=l?"&fields=".concat(l):"";return"".concat(n.default.LXP_RESOURCES.RECOMMANDED_USERS,"?limit=").concat(e,"&offset=").concat(a,"&my_teams_users=").concat(t).concat(o)},D=(e,a,t,n,o)=>{a="limit=".concat(a);let r="";(0,l.xb)(o)||null===o||void 0===o||o.forEach((e=>{a+="&source_ids[]=".concat(e.key)})),n&&(r=n);return{token:e,sourceDataUrl:r,params:a+="&sort_by_seq_no=true",userAgent:t}},m=e=>{let{limit:a,offset:t,filter_by_language:l=!0}=e;return"".concat(n.default.LXP_RESOURCES.VIDEOS,"?limit=").concat(a,"&offset=").concat(t,"&fields=").concat(n.default.FEED_KEYS,"&filter_by_language=").concat(l)},y=(e,a,t)=>{let n=e;return 5!==t||(0,l.xb)(e)||(0,l.xb)(e[null===a||void 0===a?void 0:a.id])||(n=e[a.id]),(0,l.g2)(n)},I=(e,a,t,l,o)=>{const r=l?"&limit=".concat(l):"",u=o?"&offset=".concat(o):"";return"".concat(n.default.LXP_RESOURCES.TRENDING_CARDS,"?domain=").concat(e,"&token=").concat(a).concat(r).concat(u,"&user_agent=").concat(t)}},8637:(e,a,t)=>{t.r(a),t.d(a,{default:()=>_});var l=t(1649),n=t(2143),o=t(3442),r=t(2856),u=t(5490),s=t(9923),c=t(7064),d=t(8079),i=t(8170);const E=(0,l.lazy)((()=>Promise.resolve().then(t.bind(t,8958)))),T=e=>{let{userInfo:a,label:t,carousel:T,eclUrl:f,carouselType:_,instanceCarousel:S,customCarousel:R,carouselTypeSplitArrayLength:v,carouselTypeSplitArray:C,orgInfo:O}=e;const[A,D]=(0,l.useState)([]),[m,y]=(0,l.useState)(!1),[I,p]=(0,l.useState)(!0),k=(0,o.s0)(),g=(0,l.useRef)(),U=(0,l.useCallback)((e=>{let{apiError:a,responseData:t}=e;p(!1),y(!0),a?(D([]),null!==a&&void 0!==a&&a.nextPage&&k(a.nextPage)):D(t||[])}),[k]),b=(0,l.useCallback)((async()=>{const[e,t]=await(0,s.b0)({carouselType:_,userInfo:a,instanceCarousel:S,customCarousel:R,eclUrl:f,orgInfo:O});U({responseData:e,apiError:t})}),[_,a,S,R,f,O,U]);(0,l.useEffect)((()=>{b()}),[_,b]);return(0,i.jsxs)("div",{ref:g,children:[(0,i.jsxs)("div",{className:"edc-discover-carousels edc-view-all",children:[(0,i.jsx)("h3",{className:"edc-discover-carousels-label edc-text-primary",children:t}),(0,s.lT)(A,T,v)&&(0,i.jsx)("span",{className:"edc-discover-view-all edc-text-secondary",onClick:()=>{k(r.default.PAGES.VIEW_ALL,{state:{carousel:T,fromPage:r.default.TABS.DISCOVER,eclUrl:f,label:t,carouselTypeSplitArray:C,carouselTypeSplitArrayLength:v}})},children:(0,c.eO)({key:"viewAll",defaultTranslatedValue:u.p.Cards.view_all})})]}),(0,i.jsx)("div",{className:"edc-discover-carousels-list",children:(()=>{var e;let{carouselType:a,filterData:t}=(0,s.PY)({data:A,carousel:T,carouselTypeSplitArray:C,carouselTypeSplitArrayLength:v});var o;if((0,d.xb)(t)||(t=Array.isArray(t)?t:(0,s.K2)(t)),(0,d.xb)(t)&&!I)return m&&(null===g||void 0===g||null===(o=g.current)||void 0===o||o.remove()),(0,i.jsx)("div",{className:"edc-no-result-found",children:(0,c.eO)({key:"Cards_noResultFound",defaultTranslatedValue:u.p.Cards.no_result_found})});let f=r.default.CAROUSEL_TYPE.CARD;switch(a){case r.default.DISCOVER_TAB_CAROUSEL_TYPE.CARD:f=r.default.CAROUSEL_TYPE.CARD;break;case r.default.DISCOVER_TAB_CAROUSEL_TYPE.USER:f=r.default.CAROUSEL_TYPE.USER;break;case r.default.DISCOVER_TAB_CAROUSEL_TYPE.CHANNEL:f=r.default.CAROUSEL_TYPE.CHANNEL;break;case r.default.DISCOVER_TAB_CAROUSEL_TYPE.PROVIDERS:f=r.default.CAROUSEL_TYPE.PROVIDER;break;default:return m&&!a&&(null===g||void 0===g||null===(e=g.current)||void 0===e||e.remove()),(0,i.jsx)("div",{className:"edc-no-result-found",children:(0,c.eO)({key:"Cards_noResultFound",defaultTranslatedValue:u.p.Cards.no_result_found})})}return(0,i.jsx)(l.Suspense,{fallback:(0,i.jsx)(n.SmartCardSkeleton,{}),children:(0,i.jsx)(E,{isLoading:I,cards:t,carouselType:f})})})()})]})};var f=t(8984);const _=l.memo((()=>{const e=(0,o.s0)(),{userInfo:a,orgInfo:t}=(0,l.useContext)(f.Il),[u,c]=(0,l.useState)([]),[E,_]=(0,l.useState)(!0),[S,R]=(0,l.useState)([]),[v,C]=(0,l.useState)([]),O=(0,l.useMemo)((()=>(0,s.h3)(null===t||void 0===t?void 0:t.configs)),[null===t||void 0===t?void 0:t.configs]);(0,l.useEffect)((()=>{O||e(r.default.PAGES.DASHBOARD)}),[e,O]);const A=(0,l.useCallback)((e=>{const{enabledCarouselList:a,discoverConfig:t}=(0,s.mB)(e);c(a);const{instanceCarousel:l,customCarousel:n}=(0,s.lV)(t);R(l),C(n)}),[]);(0,l.useEffect)((()=>{const{configs:e}=t;O&&!(0,d.xb)(e)&&A(e),_(!1)}),[A,t,O]);return E?(0,i.jsx)(n.Spinner,{variant:"lg"}):u&&u.length>0?(()=>{let e=null===u||void 0===u?void 0:u.map((e=>{const l=e.index,n=e.carouselType.split("/"),o=n.length>2?5===n.length?n[n.length-3]:r.default.DISCOVER_TAB.INSTANCES:n[n.length-1],u=(0,s.jf)(e,t,a),c=n.length,d=e&&e.design?e.design:r.default.CAROUSEL_CLICK_TYPE.DEFAULT;return(0,i.jsx)(T,{userInfo:a,carousel:e,carouselType:o,label:u,eclUrl:null===t||void 0===t?void 0:t.eclUrl,instanceCarousel:S,customCarousel:v,carouselCardClickType:d,carouselTypeSplitArrayLength:c,carouselTypeSplitArray:n,orgInfo:t},l)}));return(0,i.jsx)("div",{className:"edc-discover-tab ",children:(0,i.jsx)("div",{children:e})})})():(0,i.jsx)("div",{className:"edc-text-center",children:"No Result Found"})}))}}]);