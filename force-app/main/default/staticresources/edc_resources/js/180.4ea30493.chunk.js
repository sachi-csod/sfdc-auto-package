"use strict";(self.webpackChunkedc_widgets_sfdc=self.webpackChunkedc_widgets_sfdc||[]).push([[180],{5180:(e,a,l)=>{l.r(a),l.d(a,{default:()=>f});var t=l(1649),d=l(2143),i=l(4945),n=l(3442),s=l(2856),r=l(5490),c=l(1839),o=l(7541),u=l(5201),m=l(4019),v=l(4959),b=l(7064),g=l(8079),h=l(8170);const f=e=>{let{selectedTab:a,trainingId:l}=e;const f=(0,u.p)(),x=(0,n.s0)(),T=(0,t.useContext)(o.Z),[k,S]=(0,t.useState)(!0),[y,C]=(0,t.useState)(0),[p,V]=(0,t.useState)([]),[E,D]=(0,t.useState)(0),[w,_]=(0,t.useState)(!1),[j,N]=(0,t.useState)(!1),[M,A]=(0,t.useState)([]),[I,L]=(0,t.useState)(!1),B=(0,t.useCallback)((async()=>{S(!0);const[e,t]=await(0,m.AS)({registrationState:a,trainingId:l,limit:s.default.LIMIT_10,offset:y});var d;t&&f.open((null===t||void 0===t||null===(d=t.data)||void 0===d?void 0:d.message)||s.default.ERRORS.MESSAGE);e&&(V(0===y?(null===e||void 0===e?void 0:e.registrations)||[]:a=>{var l;return[...a,...null!==(l=null===e||void 0===e?void 0:e.registrations)&&void 0!==l?l:[]]}),D(null===e||void 0===e?void 0:e.total)),S(!1)}),[y,a,f,l]),P=(0,t.useCallback)((e=>{(0,g.d1)(e)&&p.length>E&&C((e=>e+s.default.LIMIT_10))}),[p.length,E]),O=(0,t.useCallback)((e=>{L(e),A(e?p.map((e=>e.id)):[])}),[p]),R=(0,t.useCallback)(((e,a)=>{A((l=>a?[...l,e]:l.filter((a=>a!==e))))}),[]),W=(0,t.useCallback)((()=>{_(!1)}),[]),U=(0,t.useCallback)((()=>{N(!1)}),[]),H=(0,h.jsx)("div",{className:"edc-live-modal-body",children:(0,b.AW)({key:"key",defaultTranslatedValue:c.w.SmartCardDetailView.liveTabApprovalModalLabel.replace("{{selected}}",M.length),variables:{selected:M.length}})}),K=(0,h.jsx)("div",{className:"edc-live-modal-body",children:(0,b.AW)({key:"key",defaultTranslatedValue:c.w.SmartCardDetailView.liveTabDeclineModalLabel.replace("{{selected}}",M.length),variables:{selected:M.length}})}),G=(0,t.useMemo)((()=>p.map(((e,a)=>[{align:"edc-text-td-left",id:"name-".concat(a,"-1"),label:(0,h.jsxs)("div",{className:"edc-attendees-tb-checkbox",children:[(0,h.jsx)(d.Checkbox,{onChange:a=>R(e.id,a.target.checked),checked:M.includes(e.id)}),(0,h.jsx)(d.Avatar,{imgSrc:(0,v.HK)(null===e||void 0===e?void 0:e.registerUser),fullName:e.registerUser.fullName,onClick:()=>{var a;x("".concat(s.default.PAGES.USER_PROFILE,"/").concat(null===e||void 0===e||null===(a=e.registerUser)||void 0===a?void 0:a.id))}})]})},{align:"edc-text-td-left edc-text-truncate-1",id:"handle-".concat(a,"-2"),label:(0,h.jsx)("div",{onClick:()=>{var a;x("".concat(s.default.PAGES.USER_PROFILE,"/").concat(null===e||void 0===e||null===(a=e.registerUser)||void 0===a?void 0:a.id))},children:e.registerUser.handle})},{align:"edc-text-td-left",id:"registered-".concat(a,"-4"),label:T(e.registrationDate).format("l")},{align:"edc-text-td-left",id:"time-".concat(a,"-5"),label:T(e.registrationTime,"HH:mm:ss").format("h:mm A")},{align:"edc-text-td-left edc-text-truncate-1",id:"status-".concat(a,"-6"),label:(0,g.fm)(null===e||void 0===e?void 0:e.state)}]))),[p,R,T,x,M]),Y=(0,t.useMemo)((()=>[{label:(0,h.jsx)("div",{className:"edc-attendees-th-checkbox",children:(0,h.jsx)(d.Checkbox,{label:(0,b.AW)({key:"KEY",defaultTranslatedValue:c.w.SmartCardDetailView.liveTabNameLabel}),labelClassName:"edc-text-truncate-1",onChange:e=>O(e.target.checked),checked:I})}),align:"text-left",id:1},{label:(0,b.AW)({key:"KEY",defaultTranslatedValue:c.w.SmartCardDetailView.liveTabHandleLabel}),align:"edc-th-text-left",id:2},{label:(0,b.AW)({key:"KEY",defaultTranslatedValue:c.w.SmartCardDetailView.liveTabRegisteredOnLabel}),align:"edc-th-text-left",id:3},{label:(0,b.AW)({key:"KEY",defaultTranslatedValue:c.w.SmartCardDetailView.liveTabTimeLabel}),align:"edc-th-text-left",id:4},{label:(0,b.AW)({key:"KEY",defaultTranslatedValue:c.w.SmartCardDetailView.liveTabStatusLabel}),align:"edc-th-text-left",id:5}]),[O,I]),F=(0,t.useCallback)((async e=>{let{trainingId:a}=e;const[,l]=await(0,m.uX)({trainingId:a,payload:{current_state:s.default.LIVE_ATTENDEES_TABS.PENDING,new_state:s.default.LIVE_ATTENDEES_TABS.APPROVED,training_registration_ids:M}});var t,d;l?f.open(null!==(t=null===l||void 0===l||null===(d=l.data)||void 0===d?void 0:d.message)&&void 0!==t?t:(0,b.a3)({key:"errorMessage",defaultTranslatedValue:r.p.Modal.error_message})):(B(),L(!1),A([]));_(!1)}),[B,M,f]),X=(0,t.useCallback)((async e=>{let{trainingId:a}=e;const[,l]=await(0,m.uX)({trainingId:a,payload:{current_state:s.default.LIVE_ATTENDEES_TABS.PENDING,new_state:s.default.LIVE_ATTENDEES_TABS.REJECTED,training_registration_ids:M}});var t,d;l?f.open(null!==(t=null===l||void 0===l||null===(d=l.data)||void 0===d?void 0:d.message)&&void 0!==t?t:(0,b.a3)({key:"errorMessage",defaultTranslatedValue:r.p.Modal.error_message})):B();N(!1)}),[B,M,f]);return(0,t.useEffect)((()=>{0===M.length&&L(!1)}),[M.length]),(0,t.useEffect)((()=>{B()}),[B]),(0,h.jsxs)("div",{className:"edc-live-card-attendees-view-container",children:[k?(0,h.jsx)(d.Spinner,{}):p.length?(0,h.jsxs)("div",{className:"edc-live-attendees-container",children:[(0,h.jsxs)("div",{className:"edc-live-card-title-header",children:[(0,h.jsx)("span",{children:"".concat((0,b.mr)({key:"members",defaultTranslatedValue:r.p.ManagerDashboard.members})," ").concat(p.length>0?p.length:"")}),(0,h.jsxs)("div",{className:"edc-live-combined-button",children:[(0,h.jsx)(d.PrimaryButton,{text:(0,b.AW)({key:"SmartCardDetailView_approveLabel",defaultTranslatedValue:r.p.SmartCardDetailView.approve_label}),variant:M.length?"contained":"outlined",onClick:()=>{_(!0)},disabled:!M.length}),(0,h.jsx)(d.PrimaryButton,{text:(0,b.eO)({key:"key",defaultTranslatedValue:c.w.SmartCardDetailView.liveTabDeclineLabel}),variant:M.length?"contained":"outlined",onClick:()=>{N(!0)},disabled:!M.length})]})]}),(0,h.jsx)("div",{className:"edc-table-container",onScroll:e=>{P(e)},children:(0,h.jsx)(d.Table,{theadData:Y,tbodyData:G,customClass:"edc-table"})}),(0,h.jsx)("div",{className:"edc-registration-table-footer",children:(0,b.hC)({key:"ShareModal_selectedCountText",defaultTranslatedValue:r.p.ShareModal.selected_count_text.replace("{{selected}}",0).replace("{{total}}",p.length||M.length),variables:{selected:M.length,total:p.length||0}})})]}):(0,h.jsx)("div",{className:"edc-d-flex edc-align-items-center  edc-justify-content-center",children:(0,h.jsxs)("div",{className:"edc-no-result-calender",children:[(0,h.jsx)("div",{className:"edc-no-result-calender-svg",children:(0,h.jsx)(d.CalendarIcon,{width:50,height:50,color:"var(--edc-color-green_primary)"})}),(0,h.jsx)("div",{className:"edc-no-result-label",children:(0,b.eO)({key:"key",defaultTranslatedValue:c.w.SmartCardDetailView.liveNoDataLabel})})]})}),i.createPortal((0,h.jsx)("div",{children:w?(0,h.jsx)(d.Modal,{isModalOpen:w,modalHeaderData:{headerString:(0,b.AW)({key:"SmartCardDetailView_approveLabel",defaultTranslatedValue:r.p.SmartCardDetailView.approve_label}),closeModal:W},modalBodyData:H,modalFooterData:{cancelButtonText:(0,b.a3)({key:"cancel",defaultTranslatedValue:r.p.Modal.cancel}),submitButtonText:(0,b.a3)({key:"confirm",defaultTranslatedValue:r.p.Modal.confirm}),closeModal:W,submitButtonCallback:()=>{F({trainingId:l})}}}):null}),document.body),i.createPortal((0,h.jsx)("div",{children:j?(0,h.jsx)(d.Modal,{isModalOpen:j,modalHeaderData:{headerString:(0,b.eO)({key:"key",defaultTranslatedValue:c.w.SmartCardDetailView.liveTabDeclineLabel}),closeModal:U},modalBodyData:K,modalFooterData:{cancelButtonText:(0,b.a3)({key:"cancel",defaultTranslatedValue:r.p.Modal.cancel}),submitButtonText:(0,b.a3)({key:"confirm",defaultTranslatedValue:r.p.Modal.confirm}),closeModal:U,submitButtonCallback:()=>{X({trainingId:l})}}}):null}),document.body)]})}}}]);