"use strict";(self.webpackChunkedc_widgets_sfdc=self.webpackChunkedc_widgets_sfdc||[]).push([[397,267],{6534:(e,a,l)=>{l.r(a),l.d(a,{default:()=>h});var n=l(1649),t=l(2143),s=l(3442),r=l(2856),o=l(5490),c=l(8984),d=l(5201),u=l(4019),i=l(7064),f=l(8170);const h=e=>{const{userInfo:a,orgInfo:l}=(0,n.useContext)(c.Il),[h,C]=(0,n.useState)(e.channel||{}),[_,S]=(0,n.useState)(!1),N=(0,s.s0)(),L=(0,d.p)();(0,n.useEffect)((()=>{var a,n;const t=null===l||void 0===l||null===(a=l.configs)||void 0===a||null===(n=a.find((e=>e.name===r.default.ADMIN_CONFIG.PRIVATE_CHANNEL_SHOW_LOCK_ICON)))||void 0===n?void 0:n.value,s={...e.channel};s.isPrivate=!!t&&s.isPrivate,C(s)}),[l,e.channel]);const v=async()=>{S(!0);const{domain:e,jwtToken:l}=a,[n,t]=await(0,u.$x)({channel:h,jwtToken:l,domain:e});if(n){const e=h.isFollowing;h.isFollowing=!e,h.followersCount=null!==h&&void 0!==h&&h.isFollowing?((null===h||void 0===h?void 0:h.followersCount)||0)+1:((null===h||void 0===h?void 0:h.followersCount)||0)-1,C(h),S(!1)}var s;t&&(L.open((null===t||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||r.default.ERRORS.MESSAGE),S(!1))},E=(0,n.useCallback)((()=>{N("".concat(r.default.PAGES.CHANNEL_DETAIL,"/").concat(h.id))}),[h.id,N]);return(0,f.jsx)(t.ChannelCard,{onFollow:v,onUnfollow:v,onShowChannel:E,isAPIProcessing:_,channelMetaData:h,channelIconText:(0,i.eO)({key:"Cards_channel",defaultTranslatedValue:o.p.Cards.channel}),moreText:(0,i.eO)({key:"more",defaultTranslatedValue:o.p.Cards.more}),followersText:(0,i.eO)({key:"followers",defaultTranslatedValue:o.p.Cards.followers}),followingText:(0,i.eO)({key:"following",defaultTranslatedValue:o.p.Cards.following}),privateText:(0,i.eO)({key:"private",defaultTranslatedValue:o.p.Cards.private}),followChannelText:(0,i.eO)({key:"Cards_followChannel",defaultTranslatedValue:o.p.Cards.follow_channel}),unfollowChannelText:(0,i.eO)({key:"Cards_unfollowChannel",defaultTranslatedValue:o.p.Cards.unfollow_channel}),disabledChannelText:(0,i.mr)({key:"ManagerDashboard_comingSoon",defaultTranslatedValue:o.p.ManagerDashboard.coming_soon})})}},8782:(e,a,l)=>{l.r(a),l.d(a,{default:()=>S});var n=l(1649),t=l(2143),s=l(9467),r=l(6534),o=l(3838),c=l(2856),d=l(5490),u=l(744),i=l(599);const f=e=>{let{currentOffset:a,role:l,searchKey:n,isSearchPressed:t}=e;if(t&&n)return(0,i.r0)({searchText:n,limit:c.default.LIMIT,offset:a});const s=l&&l!==c.default.MY_CHANNELS_ROLES.MY?"":"&is_following=true",r=l===c.default.MY_CHANNELS_ROLES.COLLABORATOR?"&is_author=true":"",o=l===c.default.MY_CHANNELS_ROLES.CURATOR?"&is_curator=true":"",d="&fields=".concat(c.default.MY_CHANNELS_FIELDS);return"".concat(c.default.LXP_RESOURCES.CHANNELS,"?limit=").concat(c.default.LIMIT,"&offset=").concat(a).concat(s).concat(r).concat(o).concat("&sort=created_at").concat("&order_label=desc").concat(d)};var h=l(7064),C=l(8079),_=l(8170);const S=()=>{const[e,a]=(0,n.useState)([]),[l,i]=(0,n.useState)(0),[S,N]=(0,n.useState)(0),[L,v]=(0,n.useState)(c.default.MY_CHANNELS),[E,p]=(0,n.useState)(!0),[T,y]=(0,n.useState)(""),[A,w]=(0,n.useState)(c.default.MY_CHANNELS_ROLES.MY),O=(0,n.useCallback)((async e=>{let{searchKey:l="",offset:n=0,isSearch:t=!1}=e;p(!0),N(0);const s=t,r=n;0===r&&a([]);const[o,d]=await(async e=>{let{currentOffset:a,role:l,searchKey:n,isSearchPressed:t}=e;return await(0,u.x)({url:f({currentOffset:a,role:l,searchKey:n,isSearchPressed:t}),requestType:c.default.HTTP_METHOD.GET})})({currentOffset:r,role:A,searchKey:l,isSearchPressed:s});if(!d){const{channels:e,total:l}=o;a((a=>0===r?e:[...a,...e])),i(r+c.default.LIMIT),N(l)}p(!1)}),[A]),x=(0,n.useCallback)((e=>{if("object"===typeof e&&0===Object.keys(e).length)return;y(""),v(e);const a=e===c.default.ALL_CHANNELS?c.default.MY_CHANNELS_ROLES.ALL:c.default.MY_CHANNELS_ROLES.MY;a!==A?w(a):O("",0)}),[O,A]);(0,n.useEffect)((()=>{O("",0)}),[O,A]),(0,n.useEffect)((()=>{v(c.default.MY_CHANNELS)}),[]);const k=(0,n.useCallback)((()=>{O({searchKey:T,offset:l})}),[O,l,T]),m=(0,n.useMemo)((()=>[{label:"".concat((0,h.HQ)({key:"myChannels",defaultTranslatedValue:d.p.Channels.my_channels})," ").concat(S>0&&L===c.default.MY_CHANNELS&&"(".concat(S,")")||""),navIndex:c.default.MY_CHANNELS},{label:"".concat((0,h.HQ)({key:"Channels_allChannels",defaultTranslatedValue:d.p.Channels.all_channels}),"  ").concat(S>0&&L===c.default.ALL_CHANNELS&&"(".concat(S,")")||""),navIndex:c.default.ALL_CHANNELS}]),[S,L]);return(0,_.jsxs)("div",{className:"edc-my-groups-container edc-view-all-group-container",children:[(0,_.jsxs)("div",{className:"edc-my-groups-header",children:[(0,_.jsx)(s.Z,{}),(0,_.jsx)(t.Navbar,{selectedNavItem:L,isDrawerVisible:!1,childrenArray:m,handleSelectedNavItemChange:e=>x(e)}),(0,_.jsx)(t.Search,{defaultValue:T,onSearch:e=>{y(e),v(""),O({searchKey:e,isSearch:!0})},placeholder:(0,h.HQ)({key:"searchHerePlaceholder",defaultTranslatedValue:d.p.Channels.search_here}),allowEmptySearch:!0})]}),(0,_.jsxs)("div",{className:"edc-group-cards-filter-container",children:[L===c.default.MY_CHANNELS?(0,_.jsx)("div",{className:"edc-group-filter",children:(0,_.jsx)(t.SideFilterCard,{filterOptions:[{filterText:(0,h.HQ)({key:"myChannels",defaultTranslatedValue:d.p.Channels.my_channels}),callback:()=>w(c.default.MY_CHANNELS_ROLES.MY),subFilters:[{text:(0,h.HQ)({key:"Channels_curatorFilterLabel",defaultTranslatedValue:d.p.Channels.curator_filter_label}),callback:()=>w(c.default.MY_CHANNELS_ROLES.CURATOR)},{text:(0,h.HQ)({key:"Channels_collaboratorFilterLabel",defaultTranslatedValue:d.p.Channels.collaborator_filter_label}),callback:()=>w(c.default.MY_CHANNELS_ROLES.COLLABORATOR)}]}]})}):null,(0,_.jsxs)("div",{className:"edc-my-group-cards edc-view-all-group-container",children:[(0,C.xb)(e)?null:null===e||void 0===e?void 0:e.map(((e,a)=>{var l;return(0,_.jsx)(r.default,{channel:e},null!==(l=null===e||void 0===e?void 0:e.id)&&void 0!==l?l:a)})),(0,C.xb)(e)&&!E?(0,_.jsx)("div",{className:"edc-spinner-container edc-text-center",children:(0,_.jsx)("b",{className:"edc-no-result-found",children:L&&(0,h.HQ)({key:"ChooseWorkspace_emailSignin",defaultTranslatedValue:d.p.Channels.no_result_found})||"".concat((0,h.HQ)({key:"ChooseWorkspace_emailSignin",defaultTranslatedValue:d.p.Channels.no_channels_found}),' "').concat(T,'"')})}):null,E?(0,_.jsx)("div",{className:"edc-spinner-container",children:(0,_.jsx)(t.Spinner,{variant:"lg",spinnerMessage:(0,h.HQ)({key:"waitingChannelsLabel",defaultTranslatedValue:d.p.Channels.waiting_channel_label})})}):null]})]}),!E&&(null===e||void 0===e?void 0:e.length)<S?(0,_.jsx)(o.Z,{onClick:k}):null]})}}}]);