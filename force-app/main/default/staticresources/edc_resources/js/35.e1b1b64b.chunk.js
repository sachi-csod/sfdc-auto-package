"use strict";(self.webpackChunkedc_widgets_sfdc=self.webpackChunkedc_widgets_sfdc||[]).push([[35],{6729:(l,e,a)=>{a.r(e),a.d(e,{default:()=>k});var o=a(1649),d=a(2143),i=a(2856),n=a(5490),s=a(5201),t=a(3641),r=a(5523),u=a(4959),v=a(7064),c=a(224),f=a(8079),m=a(3442),g=a(8170);const w=l=>{let{isLoading:e,handleOnScroll:a,followers:s,isLoadMore:t,totalFollowers:r,showFollowersModal:u,onModalClose:c}=l;const f=(0,m.s0)(),w=(0,o.useCallback)((l=>{f("".concat(i.default.PAGES.USER_PROFILE,"/").concat(l))}),[f]),h=(0,g.jsxs)("div",{className:"edc-followers-table",children:[(0,g.jsx)("div",{className:"edc-follower-modal-header",children:(0,g.jsx)(d.Typography,{fontWeight:"bold",children:(0,v.a3)({key:"authorHeading",defaultTranslatedValue:n.p.Modal.name})})}),e?(0,g.jsx)(d.Spinner,{variant:"lg",spinnerMessage:(0,v.a3)({key:"Modal_fetchingFollowers",defaultTranslatedValue:n.p.Modal.fetching_followers})}):(0,g.jsxs)("div",{className:"edc-followers-container",onScroll:l=>a(l),children:[s&&Array.isArray(s)&&(null===s||void 0===s?void 0:s.map(((l,e)=>(0,g.jsx)("div",{className:"edc-follower",children:(0,g.jsx)(d.Avatar,{alt:null===l||void 0===l?void 0:l.name,authorId:(null===l||void 0===l?void 0:l.id)||e,avatarImgCallback:()=>{},designation:null===l||void 0===l?void 0:l.userRoles[0].name,fullName:null===l||void 0===l?void 0:l.name,imgSrc:null===l||void 0===l?void 0:l.avatarimages.large,size:"medium",onClick:()=>w((null===l||void 0===l?void 0:l.id)||(null===l||void 0===l?void 0:l.handle))})},(null===l||void 0===l?void 0:l.id)||e)))),t&&(0,g.jsx)(d.Spinner,{variant:"lg",spinnerMessage:(0,v.a3)({key:"Modal_loadingMoreFollowers",defaultTranslatedValue:n.p.Modal.loading_more_followers})})]})]});return(0,g.jsx)(d.Modal,{isModalOpen:u,modalHeaderData:{headerString:"".concat((0,v.a3)({key:"followers",defaultTranslatedValue:n.p.Modal.followers})," (").concat(r,")"),closeModal:c},modalBodyData:h,modalFooterData:{cancelButtonText:(0,v.a3)({key:"close",defaultTranslatedValue:n.p.Modal.close}),closeModal:c,hasSubmitButton:!1}})},h=l=>{let{isLoading:e,handleOnScroll:a,followings:s,isLoadMore:t,totalFollowing:r,showFollowingModal:c,onModalClose:f}=l;const w=(0,m.s0)(),h=(0,o.useCallback)((l=>{w("".concat(i.default.PAGES.USER_PROFILE,"/").concat(l))}),[w]),p=(0,g.jsxs)("div",{className:"edc-followers-table",children:[(0,g.jsx)("div",{className:"edc-follower-modal-header",children:(0,g.jsx)(d.Typography,{fontWeight:"bold",children:(0,v.a3)({key:"authorHeading",defaultTranslatedValue:n.p.Modal.name})})}),e?(0,g.jsx)(d.Spinner,{variant:"lg",spinnerMessage:(0,v.a3)({key:"Modal_fetchingFollowing",defaultTranslatedValue:n.p.Modal.fetching_following})}):(0,g.jsxs)("div",{className:"edc-followers-container",onScroll:l=>a(l),children:[s&&Array.isArray(s)?null===s||void 0===s?void 0:s.map(((l,e)=>(0,g.jsx)("div",{className:"edc-follower",children:(0,g.jsx)(d.Avatar,{alt:null===l||void 0===l?void 0:l.name,authorId:(null===l||void 0===l?void 0:l.id)||e,avatarImgCallback:()=>{},designation:null===l||void 0===l?void 0:l.userRoles[0].name,fullName:null===l||void 0===l?void 0:l.name,imgSrc:(0,u.HK)(l),size:"medium",onClick:()=>h((null===l||void 0===l?void 0:l.id)||(null===l||void 0===l?void 0:l.handle))})},(null===l||void 0===l?void 0:l.id)||e))):null,t?(0,g.jsx)(d.Spinner,{variant:"lg",spinnerMessage:(0,v.a3)({key:"Modal_loadingMoreFollowing",defaultTranslatedValue:n.p.Modal.loading_more_following})}):null]})]});return(0,g.jsx)(d.Modal,{isModalOpen:c,modalHeaderData:{headerString:"".concat((0,v.a3)({key:"following",defaultTranslatedValue:n.p.Modal.following})," (").concat(r,")"),closeModal:f},modalBodyData:p,modalFooterData:{cancelButtonText:(0,v.a3)({key:"close",defaultTranslatedValue:n.p.Modal.close}),closeModal:f,hasSubmitButton:!1}})},p=(0,o.memo)((l=>{var e;let{showViewDetailsModal:a,onModalClose:o,userInfo:i}=l;const s=null!==i&&void 0!==i&&i.onboardingCompletedDate?new Date(null===i||void 0===i?void 0:i.onboardingCompletedDate):null,t=s?s.toLocaleString("default",{year:"numeric",month:"short"}):"",r=[{key:(0,v.a3)({key:"email",defaultTranslatedValue:n.p.Modal.email}),value:null===i||void 0===i?void 0:i.email,isLock:!1},{key:(0,v.a3)({key:"Modal_biography",defaultTranslatedValue:n.p.Modal.biography}),value:null===i||void 0===i?void 0:i.bio,isLock:!1},{key:(0,v.a3)({key:"Modal_handle",defaultTranslatedValue:n.p.Modal.handle}),value:null===i||void 0===i?void 0:i.handle,isLock:!1},{key:(0,v.a3)({key:"Modal_managerName",defaultTranslatedValue:n.p.Modal.manager_name}),value:(()=>{var l,e,a,o,d,n,s,t,r,u;return null!==i&&void 0!==i&&null!==(l=i.manager)&&void 0!==l&&l.name?null===i||void 0===i||null===(n=i.manager)||void 0===n?void 0:n.name:null!==i&&void 0!==i&&null!==(e=i.manager)&&void 0!==e&&e.firstName&&null!==i&&void 0!==i&&null!==(a=i.manager)&&void 0!==a&&a.lastName?"".concat(null===i||void 0===i||null===(s=i.manager)||void 0===s?void 0:s.firstName," ").concat(null===i||void 0===i||null===(t=i.manager)||void 0===t?void 0:t.lastName):null!==i&&void 0!==i&&null!==(o=i.manager)&&void 0!==o&&o.firstName||null!==i&&void 0!==i&&null!==(d=i.manager)&&void 0!==d&&d.lastName?(null===i||void 0===i||null===(r=i.manager)||void 0===r?void 0:r.firstName)||(null===i||void 0===i||null===(u=i.manager)||void 0===u?void 0:u.lastName):"-"})(),isLock:!1},{key:(0,v.a3)({key:"Modal_designation",defaultTranslatedValue:n.p.Modal.designation}),value:null===i||void 0===i||null===(e=i.profile)||void 0===e?void 0:e.jobTitle,isLock:!1},{key:(0,v.a3)({key:"Modal_joinedOn",defaultTranslatedValue:n.p.Modal.joined_on}),value:t,isLock:!1}],u=(0,g.jsx)("div",{className:"edc-profile-view-details-modal",children:(0,g.jsx)("div",{className:"edc-view-detail-modal-ui",children:r&&Array.isArray(r)?null===r||void 0===r?void 0:r.map(((l,e)=>(0,g.jsxs)("div",{className:"edc-key-value-container",children:[(0,g.jsxs)("div",{className:"edc-text-label",children:[(0,g.jsx)(d.Typography,{style:{margin:0,paddingRight:"5px"},variant:"span1",color:"var(--edc-font-color_secondary)",children:l.key}),l.isLock&&(0,g.jsx)(d.PrivateProfileIcon,{width:"17",height:"14"})]}),(0,g.jsx)(d.Typography,{style:{margin:0},children:(0,f.xb)(l.value)?"-":l.value})]},e))):null})});return(0,g.jsx)(d.Modal,{isModalOpen:a,modalHeaderData:{headerString:(0,v.a3)({key:"Modal_profileDetails",defaultTranslatedValue:n.p.Modal.profile_details}),closeModal:o},modalBodyData:u,modalFooterData:{cancelButtonText:(0,v.a3)({key:"close",defaultTranslatedValue:n.p.Modal.close}),closeModal:o,hasSubmitButton:!1}})})),k=o.memo((l=>{var e,a;let{userInfo:m,isPublicProfile:k}=l;const M=(0,s.p)(),[y,T]=(0,o.useState)(!1),[C,b]=(0,o.useState)(!1),[x,S]=(0,o.useState)(!1),[_,j]=(0,o.useState)(!1),[L,V]=(0,o.useState)(!1),[F,O]=(0,o.useState)(!0),[N,E]=(0,o.useState)(0),[I,D]=(0,o.useState)([]),[P,R]=(0,o.useState)(!1),[B,A]=(0,o.useState)(0),[H,U]=(0,o.useState)(!1),[G,Q]=(0,o.useState)(!1),[W,z]=(0,o.useState)(!1),[K,J]=(0,o.useState)(0),[X,$]=(0,o.useState)([]),[q,Y]=(0,o.useState)(""),[Z,ll]=(0,o.useState)((null===m||void 0===m?void 0:m.isFollowing)||!1),[el,al]=(0,o.useState)(!1),ol=(0,o.useCallback)((()=>{A(0),V(!1),Q(!1),z(!1)}),[]),dl=(0,o.useCallback)((()=>{V(!0)}),[]),il=()=>{A((l=>l+i.default.SLIDER_LIMIT))},nl=(0,o.useCallback)((async()=>{const[l,e]=await(0,t.ET)({offset:B});e?O(!1):(D((e=>{var a;return 0===B?null===l||void 0===l?void 0:l.users:[...e,...null!==(a=null===l||void 0===l?void 0:l.users)&&void 0!==a?a:[]]})),E(null===l||void 0===l?void 0:l.total),R((null===l||void 0===l?void 0:l.users.length)<i.default.SLIDER_LIMIT),O(!1),U(!1),il())}),[B]),sl=(0,o.useCallback)((async()=>{const[l,e]=await(0,t.$7)({offset:B});e?O(!1):($((e=>{var a;return 0===B?null===l||void 0===l?void 0:l.users:[...e,...null!==(a=null===l||void 0===l?void 0:l.users)&&void 0!==a?a:[]]})),J(null===l||void 0===l?void 0:l.total),R((null===l||void 0===l?void 0:l.users.length)<i.default.SLIDER_LIMIT),O(!1),U(!1),il())}),[B]),tl=(0,o.useCallback)((()=>{$([]),O(!0),sl(),z(!0)}),[sl]),rl=(0,o.useCallback)((()=>{D([]),O(!0),nl(),Q(!0)}),[nl]),ul=(0,o.useCallback)((l=>{(0,f.d1)(l)&&(I.length>0||X.length>0)&&!P&&!H&&(U(!0),G&&nl(),W&&sl())}),[I.length,X.length,P,H,G,nl,W,sl]),vl=(0,o.useCallback)((async l=>{const[e,a]=await(0,r.f)(l);if(a)M.open(a);else{const l=(0,f.x6)(null===e||void 0===e?void 0:e.points);Y(l)}}),[M]),cl=(0,o.useCallback)((async l=>{if(!el){al(!0);const o=l?i.default.UN_FOLLOW:i.default.FOLLOW;ll(!l);const[,d]=await(0,t.VX)({userId:null===m||void 0===m?void 0:m.id,followStatus:o});var e,a;if(d)ll(l),M.open(null!==(e=null===d||void 0===d||null===(a=d.data)||void 0===a?void 0:a.message)&&void 0!==e?e:(0,v.eO)({key:"errorMessage",defaultTranslatedValue:n.p.Cards.error_message}));al(!1)}}),[el,M,null===m||void 0===m?void 0:m.id]);return(0,o.useEffect)((()=>{if(b(!1),T(!1),S(!1),j(!1),Y(""),m){var l;(l=>{l.forEach((l=>{l===i.default.MEMBER||l===i.default.GROUP_MEMBER?b(!0):l===i.default.ADMIN||l===i.default.GROUP_LEADER?T(!0):l===i.default.INFLUENCER?S(!0):l===i.default.SME&&j(!0)}))})((null===m||void 0===m||null===(l=m.roles)||void 0===l?void 0:l.filter((l=>l&&~i.default.USER_BADGE_ROLES.indexOf(l))))||[]),null!==m&&void 0!==m&&m.id&&vl(null===m||void 0===m?void 0:m.id)}}),[m,vl]),(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)(d.ProfileHeader,{user:{avatarImage:(0,u.HK)(m),bannerImage:(0,c.Fm)(null===m||void 0===m?void 0:m.coverimages),bio:null===m||void 0===m?void 0:m.bio,followersCount:null===m||void 0===m?void 0:m.followersCount,followingCount:null===m||void 0===m?void 0:m.followingCount,id:null===m||void 0===m?void 0:m.id,isAdmin:y,isInfluencer:x,isMember:C,isSME:_,jobTitle:null!==(e=null===m||void 0===m||null===(a=m.profile)||void 0===a?void 0:a.jobTitle)&&void 0!==e?e:"",name:null===m||void 0===m?void 0:m.name,skillCoinsCount:q},viewDetailCallback:dl,followersCallback:rl,followingsCallback:tl,hasEditProfileButton:!1,hasPublicProfileButton:!1,hasFollowOrUnFollowButton:k,handleFollowOrUnFollowBtnCallback:()=>cl(Z),isFollowing:Z,hasShowFollowersAndFollowingInfo:!k,followingLabelText:(0,v.eO)({key:"following",defaultTranslatedValue:n.p.Cards.following}),viewDetailsLabelText:(0,v.eO)({key:"Cards_viewDetails",defaultTranslatedValue:n.p.Cards.view_details}),viewPublicProfileText:(0,v.eO)({key:"Cards_viewPublicProfile",defaultTranslatedValue:n.p.Cards.view_public_profile}),editProfileText:(0,v.eO)({key:"Cards_editProfile",defaultTranslatedValue:n.p.Cards.edit_profile}),adminText:(0,v.eO)({key:"Cards_admin",defaultTranslatedValue:n.p.Cards.admin}),memberText:(0,v.eO)({key:"Cards_member",defaultTranslatedValue:n.p.Cards.member}),influencerText:(0,v.eO)({key:"Cards_influencer",defaultTranslatedValue:n.p.Cards.influencer}),unFollowLabelText:(0,v.eO)({key:"unFollow",defaultTranslatedValue:n.p.Cards.unfollow}),followerSingularText:(0,v.HQ)({key:"follower",defaultTranslatedValue:n.p.Channels.follower}),followerPluralText:(0,v.HQ)({key:"followers",defaultTranslatedValue:n.p.Channels.followers}),pointsLabelText:(0,v.HQ)({key:"points",defaultTranslatedValue:n.p.Channels.points}),skillCoinsLabelText:"SkillCoins",skillsDataTooltipText:(0,v._J)({key:"userProfile_skillsTooltip",defaultTranslatedValue:n.p.userProfile.skills_tooltip}),followButtonText:(0,v.HQ)({key:"follow",defaultTranslatedValue:n.p.Channels.follow})}),(0,g.jsx)(p,{showViewDetailsModal:L,onModalClose:ol,userInfo:m}),(0,g.jsx)(w,{isLoading:F,handleOnScroll:ul,followers:I,isLoadMore:H,totalFollowers:N,showFollowersModal:G,onModalClose:ol}),(0,g.jsx)(h,{isLoading:F,handleOnScroll:ul,followings:X,isLoadMore:H,totalFollowing:K,showFollowingModal:W,onModalClose:ol})]})}))}}]);