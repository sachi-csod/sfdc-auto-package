"use strict";(self.webpackChunkedc_widgets_sfdc=self.webpackChunkedc_widgets_sfdc||[]).push([[131],{9467:(e,a,t)=>{t.d(a,{Z:()=>s});t(1649);var l=t(2143),d=t(3442),i=t(5490),o=t(7064),n=t(8170);const s=e=>{let{goBack:a}=e;const t=(0,d.s0)();return(0,n.jsx)("div",{className:"edc-position-relative edc-back-button",children:(0,n.jsxs)("div",{onClick:()=>{"function"!==typeof a?t(-1):a()},className:"edc-d-flex edc-pointer edc-align-items-center edc-gap-one-fourth edc-back-button-icon-and-text",children:[(0,n.jsx)("span",{className:"edc-d-inline-flex",children:(0,n.jsx)(l.ArrowBackwardIcon,{width:10,height:20})}),(0,n.jsx)("span",{children:(0,o.TB)({key:"back",defaultTranslatedValue:i.p.Search.back})})]})})}},5886:(e,a,t)=>{t.d(a,{eG:()=>i,x:()=>s});var l=t(7064),d=t(5490);const i={ADD_TO_PATHWAY:"add_to_pathway",ADD_TO_JOURNEY:"add_to_journey",POST_TO_CHANNEL:"post_to_channel",ASSIGN_TO_ME:"assign_to_me",ASSIGN:"assign",PROMOTE:"promote",EDIT:"edit",CHANGE_AUTHOR:"change_author",DELETE:"delete",REPORT:"report",CARD_INSIGHTS:"card_insights",DIVIDER:"divider",DISMISS_ASSIGNMENT:"dismiss_assignment"},o={[i.ADD_TO_PATHWAY]:"isAddToPathwayEnabled",[i.ADD_TO_JOURNEY]:"isAddToJourneyEnabled",[i.POST_TO_CHANNEL]:"isPostToChannelEnabled",[i.ASSIGN_TO_ME]:"isAssignToMeEnabled",[i.ASSIGN]:"isAssignEnabled",[i.CHANGE_AUTHOR]:"isChangeAuthorEnabled",[i.PROMOTE]:"isPromoteEnabled",[i.EDIT]:"isEditEnabled",[i.DELETE]:"isDeleteEnabled",[i.REPORT]:"isReportEnabled",[i.CARD_INSIGHTS]:"isCardInsightsEnabled",[i.DISMISS_ASSIGNMENT]:"isDismissAssignmentEnabled"},n=[{key:i.ADD_TO_PATHWAY,label:"Add to Pathway",permissionKey:o[i.ADD_TO_PATHWAY],type:"item",translationKey:"addToPathway"},{key:i.ADD_TO_JOURNEY,label:"Add to Journey",permissionKey:o[i.ADD_TO_JOURNEY],type:"item",translationKey:"ContextMenu_addToJourney"},{key:i.ASSIGN_TO_ME,label:"Assign to Me",permissionKey:o[i.ASSIGN_TO_ME],type:"item",translationKey:"ContextMenu_assignToMe"},{key:i.ASSIGN,label:"Assign",permissionKey:o[i.ASSIGN],type:"item",translationKey:"assign"},{key:i.DIVIDER,type:"divider"},{key:i.REPORT,label:"Report It",permissionKey:o[i.REPORT],type:"item",translationKey:"report"},{key:i.CARD_INSIGHTS,label:"Card Insights",permissionKey:o[i.CARD_INSIGHTS],type:"item",translationKey:"ContextMenu_cardInsights"},{key:i.DISMISS_ASSIGNMENT,label:"Dismiss from Assignments",permissionKey:o[i.DISMISS_ASSIGNMENT],type:"item",translationKey:"ContextMenu_dismissAssignment"}],s=e=>{var a;let{permissions:t={},t:i}=e;return null===(a=n.filter((e=>{let{permissionKey:a,type:l}=e;return"divider"===l||t[a]})))||void 0===a?void 0:a.map((e=>({...e,label:(0,l.uZ)({key:e.translationKey,defaultTranslatedValue:d.p.ContextMenu[e.key]})||e.label})))}},2378:(e,a,t)=>{t.d(a,{Z:()=>y});var l=t(1649),d=t(2143),i=t(4945),o=t(3442),n=t(710),s=t(7588),r=t(6873),u=t(4270),c=t(4584),v=t(4607),m=t(8176),T=t(2856),S=t(5490),E=t(8984),_=t(7541),A=t(5201),D=t(5886),b=t(7064),p=t(8079),I=t(8170);const y=e=>{var a,t,y,f,g,h;let{cardData:k,cardMetaData:C,onBookmarkClick:x,contextMenuOptions:N,isBookmarked:O,creatorData:R,permissions:M,setPermissions:P,setCardData:j=(()=>{}),liveCardPreviewImage:w=""}=e;const{userInfo:V,orgInfo:G,rootElement:L}=(0,l.useContext)(E.Il),H=(0,l.useContext)(_.Z),B=(0,o.s0)(),[Y,U]=(0,l.useState)(!1),[K,F]=(0,l.useState)(!1),[W,J]=(0,l.useState)(!1),[z,Z]=(0,l.useState)(!1),[$,q]=(0,l.useState)(!1),[Q,X]=(0,l.useState)(!1),[ee,ae]=(0,l.useState)(!1),[te,le]=(0,l.useState)(!1),[de,ie]=(0,l.useState)(!1),[oe,ne]=(0,l.useState)(!1),{isShowAuthor:se=!1,isShowProvider:re=!1}=C,ue=(0,l.useMemo)((()=>{var e,a;return G&&(null===(e=G.configs)||void 0===e||null===(a=e.find((e=>e.name===T.default.ADMIN_CONFIG.ENABLE_SHOW_CREATOR)))||void 0===a?void 0:a.value)||!1}),[G]),ce=(0,l.useMemo)((()=>se&&re||se?T.default.CARD_AVATAR_TYPE.AUTHOR:re?T.default.CARD_AVATAR_TYPE.PROVIDER:null),[se,re]),ve=(0,A.p)(),me=(0,l.useCallback)((()=>{te?ve.open((0,b.o2)({key:"ReportIt_alreadyReportedMessage",defaultTranslatedValue:S.p.ReportIt.already_reported_message})):X(!0)}),[te,ve]);(0,l.useEffect)((()=>{null!==k&&void 0!==k&&k.isReported&&le(null===k||void 0===k?void 0:k.isReported)}),[null===k||void 0===k?void 0:k.isReported]);const Te=(0,l.useCallback)((()=>{var e,a,t,l;if(re)return;const d=(null===C||void 0===C||null===(e=C.author)||void 0===e?void 0:e.id)||(null===k||void 0===k||null===(a=k.author)||void 0===a?void 0:a.id)||(null===C||void 0===C||null===(t=C.author)||void 0===t?void 0:t.handle)||(null===k||void 0===k||null===(l=k.author)||void 0===l?void 0:l.handle);d&&B("".concat(T.default.PAGES.USER_PROFILE,"/").concat(d))}),[null===k||void 0===k||null===(a=k.author)||void 0===a?void 0:a.handle,null===k||void 0===k||null===(t=k.author)||void 0===t?void 0:t.id,re,null===C||void 0===C||null===(y=C.author)||void 0===y?void 0:y.handle,null===C||void 0===C||null===(f=C.author)||void 0===f?void 0:f.id,B]),Se=(0,l.useMemo)((()=>{let e=R;return null!==R&&void 0!==R&&R.dateCreated&&(e={...e,dateCreated:(0,p.Z5)({moment:H,dateString:null===R||void 0===R?void 0:R.dateCreated})}),null!==R&&void 0!==R&&R.dateAssigned&&(e={...e,dateAssigned:(0,p.Z5)({moment:H,dateString:null===R||void 0===R?void 0:R.dateAssigned})}),null!==R&&void 0!==R&&R.dueDate&&(e={...e,dueDate:(0,p.Z5)({moment:H,dateString:null===R||void 0===R?void 0:R.dueDate})}),e}),[R,H]);return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("div",{children:(0,I.jsx)(d.DetailViewHeader,{isBookmarked:O,contextMenuOptions:N,creator:Se,onBookmark:()=>x(T.default.ICONS.bookmark),onOptionSelect:e=>{(e=>{let{event:a}=e;switch(a.key){case D.eG.ADD_TO_PATHWAY:U(!0);break;case D.eG.ADD_TO_JOURNEY:F(!0);break;case D.eG.ASSIGN:J(!0);break;case D.eG.CARD_INSIGHTS:Z(!0);break;case D.eG.ASSIGN_TO_ME:q(!0);break;case D.eG.REPORT:te||X(!0),me();break;case D.eG.POST_TO_CHANNEL:ae(!0);break;case D.eG.DISMISS_ASSIGNMENT:ie(!0);break;case D.eG.CHANGE_AUTHOR:ne(!0)}})({event:e})},title:(null===k||void 0===k?void 0:k.cardTitle)||(null===C||void 0===C?void 0:C.title),isAssignedBy:!w&&!(null===k||void 0===k||null===(g=k.assignment)||void 0===g||!g.assigned_date),isDueDate:!w&&!(null===k||void 0===k||null===(h=k.assignment)||void 0===h||!h.due_at),cardImageUrl:w,isBookmarkCardEnabled:M.isBookmarkCardEnabled,cardAvatarType:ce,isShowCreator:ue||re,onClick:Te,assignedByLabelText:(0,b.oj)({key:"SmartCardDetailViewHeader_assignedByLabel",defaultTranslatedValue:S.p.SmartCardDetailViewHeader.assigned_by_label}),onLabelText:(0,b.oj)({key:"SmartCardDetailViewHeader_onLabel",defaultTranslatedValue:S.p.SmartCardDetailViewHeader.on_label}),DueLabelText:"".concat((0,b.eO)({key:"due",defaultTranslatedValue:S.p.Cards.due}),": "),rootElement:L})}),i.createPortal((0,I.jsx)("div",{children:Y?(0,I.jsx)(s.T,{isPathwayModalOpen:Y,closePathwayModal:()=>U(!1),cardId:k.id}):null}),document.body),i.createPortal((0,I.jsx)("div",{children:K?(0,I.jsx)(n._,{isModalOpen:K,closeModal:()=>F(!1),cardId:k.id,isPathway:k.cardType===T.default.CARD_TYPE.PATHWAY}):null}),document.body),i.createPortal((0,I.jsx)("div",{children:$?(0,I.jsx)(u.Y,{setPermissions:P,permissions:M,isModalopen:$,closeModal:()=>q(!1),cardData:k,onSubmitSuccess:()=>{j((e=>({...e,isAssigned:!0})))},readableCardType:k.readableCardType}):null}),document.body),i.createPortal((0,I.jsx)("div",{children:W?(0,I.jsx)(r.Y,{cardId:k.id,isPrivate:!k.isPublic,userInfo:V,isAssignModalOpen:W,closeAssignModal:()=>J(!1),readableCardType:k.readableCardType}):null}),document.body),i.createPortal((0,I.jsx)("div",{children:oe?(0,I.jsx)(I.Fragment,{}):null}),document.body),i.createPortal((0,I.jsx)("div",{children:z?(0,I.jsx)(c.R,{isModalOpen:z,closeModal:()=>Z(!1),cardId:k.id,userInfo:V}):null}),document.body),i.createPortal((0,I.jsx)("div",{children:Q?(0,I.jsx)(m.w,{isModalOpen:Q,closeModal:()=>X(!1),cardId:null===k||void 0===k?void 0:k.id,setIsReported:le}):null}),document.body),i.createPortal((0,I.jsx)("div",{children:ee&&null!==k&&void 0!==k&&k.id?(0,I.jsx)(I.Fragment,{}):null}),document.body),i.createPortal((0,I.jsx)("div",{children:de?(0,I.jsx)(v.Y,{closeModal:()=>{ie(!1)},isModalOpen:de,cardData:k,onSubmitSuccess:()=>{ie(!1),j((e=>({...e,isAssigned:!1})))}}):null}),document.body)]})}},4131:(e,a,t)=>{t.r(a),t.d(a,{default:()=>g});var l=t(1649),d=t(2143),i=t(3442),o=t(9467),n=t(2856),s=t(5490),r=t(1839),u=t(8984),c=t(7541),v=t(5201),m=t(4019),T=t(5338),S=t(5886),E=t(4959),_=t(7064),A=t(8079),D=t(2378),b=t(8170);const p=(0,l.lazy)((()=>t.e(4).then(t.bind(t,4004)))),I=(0,l.lazy)((()=>t.e(180).then(t.bind(t,5180)))),y=(0,l.lazy)((()=>t.e(367).then(t.bind(t,367)))),f=(0,l.lazy)((()=>t.e(256).then(t.bind(t,2256)))),g=()=>{var e,a,t,g,h,k,C;const{cardId:x}=(0,i.UO)(),{userInfo:N,orgInfo:O,rootElement:R}=(0,l.useContext)(u.Il),M=(0,v.p)(),P=(0,l.useContext)(c.Z),[j,w]=(0,l.useState)({}),[V,G]=(0,l.useState)(),[L,H]=(0,l.useState)({}),[B,Y]=(0,l.useState)(!0),[U,K]=(0,l.useState)({}),[F,W]=(0,l.useState)(!1),[J,z]=(0,l.useState)({is_liked:!1,is_bookmarked:!1}),[Z,$]=(0,l.useState)({}),[q,Q]=(0,l.useState)({}),[X,ee]=(0,l.useState)({}),[ae,te]=(0,l.useState)(n.default.LIVE_ATTENDEES_TABS.APPROVED),le=(0,l.useMemo)((()=>(0,T.El)({cardData:j,userInfo:N,orgInfo:O})),[j,N,O]),de=(0,l.useCallback)((async e=>{const a=await(0,T.NJ)({actionType:e,cardData:j,actionIcons:J,userInfo:N,toast:M});if(a){const{updatedCard:t,newActionIcons:l}=a;w(t),z(l),e===n.default.ICONS.bookmark&&W(t.isBookmarked)}}),[j,J,N,M]),ie=(0,l.useMemo)((()=>[{navIndex:n.default.LIVE_ATTENDEES_TABS.APPROVED,label:(0,_.AW)({key:"SmartCardDetailView_approvedLabel",defaultTranslatedValue:s.p.SmartCardDetailView.approved_label})},{navIndex:n.default.LIVE_ATTENDEES_TABS.PENDING,label:(0,_.AW)({key:"pending",defaultTranslatedValue:r.w.SmartCardDetailView.liveTabPendingLabel})},{navIndex:n.default.LIVE_ATTENDEES_TABS.REJECTED,label:(0,_.AW)({key:"declined",defaultTranslatedValue:r.w.SmartCardDetailView.liveTabDeclinedLabel})},{navIndex:n.default.LIVE_ATTENDEES_TABS.UNREGISTERED,label:(0,_.AW)({key:"unregistered",defaultTranslatedValue:r.w.SmartCardDetailView.liveTabUnregisteredLabel})}]),[]),oe=(0,l.useMemo)((()=>{const e=(e=>e===n.default.LIVE_ATTENDEES_TABS.PENDING?I:e===n.default.LIVE_ATTENDEES_TABS.REJECTED?y:e===n.default.LIVE_ATTENDEES_TABS.UNREGISTERED?f:p)(ae);return(0,b.jsx)(e,{selectedTab:ae,trainingId:null===X||void 0===X?void 0:X.id,cardData:j})}),[j,ae,null===X||void 0===X?void 0:X.id]),ne=(0,l.useCallback)((e=>{"string"==typeof e&&te(e)}),[]),{lastRegistrationDate:se,registrationsCount:re,registrationLimit:ue}=X,ce=ue<=re,ve=!P().isSameOrBefore(se,"day"),me=se?P(P.utc(se)).local().format("DD MMM, YYYY"):"",Te=(0,l.useMemo)((()=>(0,T.$g)({disableRegistrationLimit:ce,disableRegistrationDate:ve,viltRegistrationLimit:ue,viltLastRegistrationDate:me})),[ve,ce,me,ue]),Se=(0,l.useCallback)((async function(){let{enableLoader:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e&&Y(!0);const[a]=await(0,m.Od)({methodType:n.default.HTTP_METHOD.GET,cardId:x||location.pathname.split("/")[2]});if(a){w({...a});const{card:e,permissions:i,cardMetaData:o}=(0,T.mo)({cardData:a||{},userInfo:N,orgInfo:O,actionIcons:{is_liked:null===a||void 0===a?void 0:a.isUpvoted,is_bookmarked:null===a||void 0===a?void 0:a.isBookmarked},isAssignedToMe:!1});W(null===a||void 0===a?void 0:a.isBookmarked),z({is_liked:a&&(null===a||void 0===a?void 0:a.isUpvoted),is_bookmarked:a&&(null===a||void 0===a?void 0:a.isBookmarked)});const n=null===a||void 0===a?void 0:a.trainingDetails;if(n){const{startDate:e,endDate:a}=n;if(e&&a){var t,l,d;const i=(0,A.SU)({date:e,moment:P}),o=(0,A.SU)({date:a,moment:P}),s=(0,A.SU)({date:e,format:"hh:mm A",moment:P}),r=(0,A.SU)({date:a,format:"hh:mm A",moment:P}),u=null===(t=P())||void 0===t||null===(l=t.tz(null===P||void 0===P||null===(d=P.tz)||void 0===d?void 0:d.guess()))||void 0===l?void 0:l.format("z");ee({...n,localStartDate:i,localEndDate:o,localStartTime:s,localEndTime:r,timezone:u})}}$({...e}),K(i),H(o)}else w({});Y(!1)}),[x,N,O,P]);return(0,l.useEffect)((()=>{x&&Se()}),[x,Se]),(0,l.useEffect)((()=>{if(j){const e=(0,T.Yc)({card:j,userInfo:N,orgInfo:O});K(e)}}),[j,O,N]),(0,l.useEffect)((()=>{G((0,S.x)({permissions:U}))}),[U]),(0,l.useEffect)((()=>{var e,a,t,l,d,i,o;const s={avatarImage:(0,E.HK)(null===j||void 0===j?void 0:j.author),jobTitle:null===j||void 0===j||null===(e=j.author)||void 0===e||null===(a=e.profile)||void 0===a?void 0:a.jobTitle,name:(null===j||void 0===j||null===(t=j.author)||void 0===t?void 0:t.fullName)||(null===j||void 0===j||null===(l=j.author)||void 0===l?void 0:l.name),assignedBy:null===j||void 0===j||null===(d=j.assigner)||void 0===d?void 0:d.fullName,dateAssigned:(0,T.L0)({date:null===j||void 0===j||null===(i=j.assignment)||void 0===i?void 0:i.assigned_date,format:n.default.DATE_FORMAT.month_name_year}),dateCreated:(0,T.L0)({date:null===j||void 0===j?void 0:j.createdAt,format:n.default.DATE_FORMAT.month_name_year}),dueDate:(0,T.L0)({date:null===j||void 0===j||null===(o=j.assignment)||void 0===o?void 0:o.due_at,format:n.default.DATE_FORMAT.month_name_year})};var r,u;null!==L&&void 0!==L&&L.isShowProvider&&(s.avatarImage=null===L||void 0===L||null===(r=L.provider)||void 0===r?void 0:r.imgSrc,s.jobTitle=null,s.name=null===L||void 0===L||null===(u=L.provider)||void 0===u?void 0:u.fullName);Q(s)}),[j,null===L||void 0===L?void 0:L.isShowProvider,null===L||void 0===L||null===(e=L.provider)||void 0===e?void 0:e.fullName,null===L||void 0===L||null===(a=L.provider)||void 0===a?void 0:a.imgSrc,Z]),(0,b.jsxs)("div",{className:"edc-live-attendees-view",children:[(0,b.jsx)(o.Z,{}),B?(0,b.jsx)(d.Spinner,{}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"edc-live-card-attendees-view-container",children:[(0,b.jsx)(D.Z,{cardData:Z,cardMetaData:L,onBookmarkClick:de,contextMenuOptions:V,permissions:U,setPermissions:K,isBookmarked:F,creatorData:q,setCreatorData:Q,setCardData:w,rootElement:R,liveCardPreviewImage:le}),(0,b.jsxs)("div",{className:"edc-live-meeting-details",children:[(0,b.jsx)("div",{children:null!==X&&void 0!==X&&X.localStartDate&&null!==X&&void 0!==X&&X.localEndDate?(0,b.jsxs)(b.Fragment,{children:[(0,_.eO)({key:"Cards_date",defaultTranslatedValue:s.p.Cards.date}),": ","".concat(X.localStartDate," - ").concat(X.localEndDate)]}):null}),(0,b.jsx)("div",{children:null!==X&&void 0!==X&&X.localStartTime&&null!==X&&void 0!==X&&X.localEndTime&&null!==X&&void 0!==X&&X.timezone?(0,b.jsxs)(b.Fragment,{children:[(0,_.eO)({key:"Cards_time",defaultTranslatedValue:s.p.Cards.time}),":"," ","".concat(X.localStartTime," - ").concat(X.localEndTime," ").concat(X.timezone)]}):null})]}),Te?(0,b.jsx)("div",{className:"edc-vilt-registration-close edc-mb-2",children:Te||""}):null,(0,b.jsx)("div",{className:"edc-d-flex edc-align-items-center edc-detail-view-footer-card-extra-info-div",children:(0,b.jsx)(d.DetailViewFooterCardExtraInfo,{smartCardType:null!==(t=null===L||void 0===L?void 0:L.readableCardType)&&void 0!==t?t:"",difficulty:null!==(g=null===L||void 0===L?void 0:L.skillLevel)&&void 0!==g?g:"",translatedSkillLevelToolTipText:null!==(h=null===L||void 0===L?void 0:L.translatedSkillLevelDesc)&&void 0!==h?h:"",language:null!==(k=null===L||void 0===L?void 0:L.language)&&void 0!==k?k:"",credits:null!==j&&void 0!==j&&j.eclSourceCpeCredits&&null!==(C=null===j||void 0===j?void 0:j.eclSourceCpeCredits)&&void 0!==C?C:"",cpeCreditsLabelText:null!==j&&void 0!==j&&j.eclSourceCpeCredits?(0,_.AW)({key:"SmartCardDetailView_creditsTextLabel",defaultTranslatedValue:s.p.SmartCardDetailView.credits_label_text}):"",duration:null===L||void 0===L?void 0:L.duration,isPrivate:!(null!==j&&void 0!==j&&j.isPublic),privateLabelText:null!==j&&void 0!==j&&j.isPublic?"":(0,_.AW)({key:"privateTextLabel",defaultTranslatedValue:s.p.SmartCardDetailView.private_label_text})})})]}),(0,b.jsx)("div",{className:"edc-live-attendees-navbar",children:(0,b.jsx)(d.Navbar,{isDrawerVisible:!1,childrenArray:ie,className:"",closeSettings:()=>{},handleSelectedNavItemChange:ne,overlay:!0,selectedNavItem:ae,style:{boxShadow:"0 0.125rem 0.375rem #26273b24",borderRadius:"0.375rem",backgroundColor:"var(--edc-bg-color_secondary)"}})}),(0,b.jsx)(l.Suspense,{fallback:(0,b.jsx)(b.Fragment,{}),children:oe})]})]})}}}]);