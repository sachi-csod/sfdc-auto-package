"use strict";(self.webpackChunkedc_widgets_sfdc=self.webpackChunkedc_widgets_sfdc||[]).push([[574],{6574:(e,t,a)=>{a.r(t),a.d(t,{default:()=>m});var l=a(1649),o=a(2143),n=a(3442),i=a(2856),s=a(5490),u=a(8984);const c=["click","scroll","load","keydown","touchstart"],d=e=>{let{onIdle:t=(()=>{}),idleTimeOut:a=5994e4,handleIdleWarningModal:o=(()=>{})}=e;const n=(0,l.useRef)(null),s=(0,l.useRef)(null),u=(0,l.useRef)(null),d=(0,l.useRef)(0),r=(0,l.useCallback)((()=>{clearTimeout(n.current),clearTimeout(s.current),n.current=setTimeout(t,a),s.current=setTimeout((()=>o(!0)),a-3e4)}),[o,a,t]);(0,l.useEffect)((()=>(u.current=setInterval((()=>{let e=localStorage.getItem(i.default.SESSION_TICK)||0;d.current!=e&&(o(!1),r()),d.current=e}),i.default.SESSION_TICK_INTERVAL),()=>{localStorage.removeItem(i.default.SESSION_TICK_INTERVAL),clearInterval(u.current)})),[o,r]);const T=(0,l.useCallback)((()=>{localStorage.setItem(i.default.SESSION_TICK,(new Date).getTime()),r()}),[r]),S=(0,l.useCallback)((()=>{c.forEach((e=>{window.addEventListener(e,T)}))}),[T]),m=(0,l.useCallback)((()=>{c.forEach((e=>{window.addEventListener(e,T)}))}),[T]);(0,l.useEffect)((()=>(a>0&&(r(),S()),()=>{clearTimeout(n.current),clearTimeout(s.current),m()})),[])};var r=a(8303),T=a(7064),S=a(8170);const m=l.memo((()=>{const e=(0,n.s0)(),{orgInfo:t,userInfo:a,appConfig:c,restartSession:m}=(0,l.useContext)(u.Il),[f,I]=(0,l.useState)(!1),[v,_]=(0,l.useState)(!1),E=()=>{t&&a&&(C(),(0,r.h)({appConfig:c,navigate:e,restartSession:m}))},g=(0,l.useMemo)((()=>{var e,a,l;return 6e4*(null!==(e=null===t||void 0===t||null===(a=t.configs)||void 0===a||null===(l=a.find((e=>e.name===i.default.ORG_CONFIG.INACTIVE_WEB_SESSION_TIMEOUT)))||void 0===l?void 0:l.value)&&void 0!==e?e:i.default.SESSION_TIMEOUT_INTERVAL.INACTIVE_SESSION)}),[null===t||void 0===t?void 0:t.configs]),O=(0,l.useMemo)((()=>{var e,a,l;return 6e4*(null!==(e=null===t||void 0===t||null===(a=t.configs)||void 0===a||null===(l=a.find((e=>e.name===i.default.ORG_CONFIG.WEB_SESSION_TIMEOUT)))||void 0===l?void 0:l.value)&&void 0!==e?e:i.default.SESSION_TIMEOUT_INTERVAL.ACTIVE_SESSION)}),[null===t||void 0===t?void 0:t.configs]),C=()=>{I(!1),_(!1)};d({onIdle:E,idleTimeOut:g,handleIdleWarningModal:e=>{I(e)}});const N=(0,l.useMemo)((()=>(0,S.jsx)("div",{className:"edc-session-inactive-modal-body",children:f?(0,T.bo)({key:"SessionTimeout_inactiveMessage",defaultTranslatedValue:s.p.SessionTimeout.inactive_message}):(0,T.bo)({key:"SessionTimeout_activeMessage",defaultTranslatedValue:s.p.SessionTimeout.active_message})})),[f]);return(0,l.useEffect)((()=>()=>{C()}),[]),(0,l.useEffect)((()=>{if(O>0){const e=setTimeout((()=>{E()}),O),t=setTimeout((()=>{_(!0)}),O-3e4);return()=>{clearTimeout(e),clearTimeout(t)}}}),[O]),(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(o.Modal,{isModalOpen:f||v,modalHeaderData:{headerString:f?(0,T.bo)({key:"SessionTimeout_inactiveTitle",defaultTranslatedValue:s.p.SessionTimeout.inactive_title}):(0,T.bo)({key:"SessionTimeout_activeTitle",defaultTranslatedValue:s.p.SessionTimeout.active_title}),closeModal:C},modalBodyData:N,modalFooterData:{cancelButtonText:f?(0,T.bo)({key:"SessionTimeout_inactiveCancelButton",defaultTranslatedValue:s.p.SessionTimeout.inactive_cancel_button}):(0,T.bo)({key:"SessionTimeout_activeCancelButton",defaultTranslatedValue:s.p.SessionTimeout.active_cancel_button}),closeModal:C,hasSubmitButton:!1}})})}))}}]);